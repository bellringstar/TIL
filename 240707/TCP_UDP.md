# TCP와 UDP
TCP와 UDP는 인터넷 프로토콜 스위트의 전송 계층에서 사용하는 두 가지 주요 프로토콜입니다.<br>
TCP는 연결 지향형 프로토콜이며, UDP는 비연결 지향형 프로토콜입니다. 두 프로토콜은 
데이터 전송의 신뢰성과 속도, 사용 사례에서 차이를 보입니다.

## TCP(Transmission Control Protocol)
신뢰성 있는 데이터 전송을 보장하는 연결 지향형 프로토콜입니다. 
TCP는 데이터의 전송 순서를 유지하고, 손실된 패킷을 재전송하며, 흐름 제어와 혼잡 제어를 수행합니다.
따라서, 데이터의 무결성과 전송의 신뢰성을 요구하는 애플리케이션에 적합합니다.
- 특징: 연결 설정(3-way handshake), 데이터 전송 확인(ACK), 흐름 제어, 혼잡 제어
- 사용 예: 웹 브라우징(HTTP/HTTPS), 이메일(SMTP, IMAP), 파일 전송(FTP)

## UDP(User Datagram Protocol)
비연결 지향형 프로토콜로, 신뢰성보다는 빠른 전송을 우선시합니다.<br>
UDP는 데이터그램을 개별적으로 전송하며, 순서 보장이나 재전송을 하지 않습니다. 따라서, 전송 속도가 중요하고 약간의 
데이터 손실을 허용할 수 있는 애플리케이션에 적합합니다.
- 특징: 연결 설정이 없다, 데이터 전송 확인 없다, 순서 보장 없다, 흐름 제어 없다
- 사용 예: 실시간 스트리밍, 온라인 게임, VoIP

---
TCP와 UDP의 성능 차이는 네트워크 환경과 애플리케이션 요구 사항에 따라 달라집니다. 
TCP는 신뢰성을 위해 오버헤드가 많아 상대적으로 느릴 수 있지만, 데이터 무결성을 보장합니다.
반면, UDP는 오버헤드가 적고 빠르지만 데이터 손실 가능성이 있습니다.

사용 예를 생각해보면 주문 처리 시스템같은 곳은 데이터의 정확성과 무결성이 중요하기 때문에 TCP가 어울릴 것입니다.
반면, 실시간 위치 추적 서비스의 경우 빠른 응답이 중요하므로 UDP가 더 어울릴 것입니다.

### 답변 예시
TCP와 UDP는 전송 계층에서 사용하는 두 가지 주요 프로토콜입니다. TCP는 신뢰성 있는 데이터 전송을 보장하는 연결 지향형 프로토콜로,
웹 브라우징이나 이메일 전송에 적합합니다. 반면, UDP는 비연결 지향형 프로토콜로, 빠른 전송이 중요하고 약간의 데이터 손실을 허용할 수 있는 
실시간 스트리밍이나 온라인 게임에 적합합니다. 예를 들어 주문 처리 시스템같은 경우 TCP가 어울리고 실시간 위치 추적 서비스 같은 경우는 UDP가 어울릴 것입니다.

## TCP와 UDP는 어떻게 동작하는가
### TCP
연결 지향형 프로토콜로서 데이터를 전송하기 전에 연결을 설정하고, 데이터의 무결성과 순서를 보장한다.
- 데이터 전송 방식
  - 연결 설정 (3-way handshake): 클라이언트와 서버가 데이터를 전송하기 전에 연결을 설정합니다.
    - 클라이언트가 서버에 SYN 패킷을 보냅니다.
    - 서버가 클라이언트에 SYN-ACK 패킷을 보냅니다.
    - 클라이언트가 다시 서버에 ACK 패킷을 보내면서 연결이 확립됩니다.
  - 데이터 전송
    - 데이터를 세그먼트로 나누어 전송하며, 각 세그먼트는 순차적으로 전송됩니다. 세그먼트가 도착하면 수신 측은 ACK 응답을 보냅니다.
    - 세그먼트는 어떻게 구성되어 있나요?
      - 헤더와 데이터로 구성되며 헤더에는 다양한 필드들이 있습니다.
        - TCP 헤더 구성
          - 출발지 포트
          - 목적지 포트
          - 순서 번호: 세그먼트 내의 데이터가 연결 내에서 위치를 나타냅니다.
          - 확인 응답 번호: 수신 측에서 다음에 받을 것으로 예상하는 순서 번호
          - 헤더 길이
          - 플래그: 제어 정보
          - 윈도우 크기: 흐름 제어를 위한 수신 버퍼 크기
          - 체크섬: 오류 검출을 위한 필드
          - 긴급 포인터
          - 옵션 및 패딩
  - 오류 검출 및 재전송
    - 손실되거나 손상된 세그먼트는 재전송됩니다.
    - 어떻게 손실되거나 손상된걸 알죠?
      - ACK와 타이머를 통해 손실되거나 손상된 세그먼트를 감지합니다.
        - ACK
          - 수신 측은 수신한 세그먼트의 순서 번호를 기반으로 ACK 응답을 보냅니다. 송신측은 특정 시간 내에 ACK를 받지 못하면 세그먼트가 손실되었음을 감지하고 재전송합니다.
        - 체크섬
          - 각 세그먼트는 체크섬 필드를 포함하여 데이터의 무결성을 검증합니다. 수신 측에서 계산된 체크섬과 수신된 체크섬이 일치하지 않으면 세그먼트가 손상된 것으로 간주합니다.
  - 연결 해제
    - 데이터 전송이 완료되면 연결을 종료합니다(4-way handshake)
    - 4-way handshake는 어떤 과정으로 이루어지나요?
      - FIN-ACK: 클라이언트가 연결을 종료하기 위해 서버에 FIN 세그먼트를 보냅니다.
      - ACK: 서버는 FIN 세그먼트를 수신하고, 이를 확인하는 ACK 세그먼트를 클라이언트에 보냅니다.
      - FIN-ACK: 서버도 연결을 종료하기 위해 클라이언트에 FIN 세그먼트를 보냅니다.
      - ACK: 클라이언트는 FIN 세그먼트를 수신하고, 이를 확인하는 ACK 세그먼트를 서버에 보냅니다.
### UDP
비연결 지향형 프로토콜로서 데이터를 개별 패킷으로 전송하며, 순서나 무결성을 보장하지 않습니다.
- 데이터 전송 방식
  - 비연결형 데이터 전송
    - 연결 설정 없이 데이터를 독립적인 패킷(데이터그램)으로 전송합니다.
  - 순서 보장 없음
    - 각 데이터그램은 독립적으로 전송되므로, 순서 보장이 없습니다.
  - 오류 검출 및 재전송 없음
    - 데이터그램은 손실이나 오류에 대한 재전송을 하지 않습니다.
  - 빠른 전송
    - 연결 설정 및 유지에 대한 오버헤드가 없기 때문에 빠른 전송이 가능합니다.
### UDP의 신뢰성 보장
UDP는 기본적으로 신뢰성을 보장하지 않습니다. 하지만 애플리케이션 레벨에서 신뢰성을 향상시킬 수 있는 방법이 있습니다.
- 애플리케이션 레벨의 ACK
  - 송신 측이 데이터그램을 전송한 후, 수신 측에서 응답(ACK)을 보내도록 구현할 수 있습니다.
- 재전송 메커니즘
  - 데이터그램이 손실되었을 때, 일정 시간 내에 응답이 없으면 재전송하도록 설계
- 오류 검출 및 수정
  - 데이터그램에 오류 검출 코드를 포함하여, 수신 측에서 데이터 무결성을 확인하고, 오류가 발생하면 재전송 요청

### 답변 예시
TCP는 연결 지향형 프로토콜로 3-way handshake를 통해 연결을 설정하고, 데이터의 순서와 무결성을 보장하면서 전송합니다.
반면 UDP는 비연결 지향형 프로토콜로, 독립적인 데이터그램을 전송하며 순서나 무결성을 보장하지 않습니다.
하지만, UDP를 사용할 때 애플리케이션 레벨에서 ACK와 재전송 메커니즘을 구축하여 신뢰성을 어느 정도 보장할 수 있습니다.