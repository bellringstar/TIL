# 정규화와 비정규화
정규호와 비정규화는 데이터베이스 설계에서 중요한 개념으로, 데이터의 중복을 제거하고 일관성을 유지하는 것과 
성능 사이의 균형을 맞추는 데 사용됩니다.

## 정규화(Normalization)
정규화는 데이터베이스의 설계를 체계화하는 과정으로, 데이터의 중복을 최소화하고 데이터 무결성을 보장하는 것이 목적입니다.

### 주요 정규화 단계
1. 제1정규형 (1NF)
   - 각 컬럼이 원자값을 가져야 합니다.
   - 반복되는 그룹이 없어야 합니다.
2. 제2정규형 (2NF)
   - 1NF를 만족화고 부분 종석성을 제거합니다.
   - 모든 비주요 속성이 주요 키에 완전 함수적 종속이어야 합니다.
   - 부분 종석성?
     - 복합키의 일부분에 대해서만 종속성을 가지는 경우를 말합니다. 즉 키의 일부만으로 다른 속성을 결정할 수 있는 경우입니다.
   - 함수적 종속?
     - 한 속성(또는 속성의 집합)의 값이 다른 속성의 값을 유일하게 결정하는 관계
     - X->Y로 표현하며 Y는 X에 함수적으로 종속된다 또는 X가 Y를 결정한다 로 읽습니다.
       - 학번 -> 학생 이름 (학번이 주어지면 학생이름이 유일하게 결정됩니다)
       - (주문번호, 제품번호) -> 주문 수량 (주문번호와 제품번호가 주어지면 주문수량이 유일하게 결정됩니다.)
3. 제3정규형 (#NF)
   - 2NF를 만족하고, 이행적 종속성을 제거합니다.
     - 이행적 종속?
       - 이행적 종속은 A -> B 이고 B -> C일 때, A->C가 성립하는 관계를 말합니다. 즉 키가 아닌 속성이 다른 키가 아닌 속성에 의해 결정되는 경우를 의미합니다.
   - 비주요 속성 간의 종속성이 없어야 합니다.
4. 보이스-코드 정규형 (BCNF)
    - 3NF를 만족하며, 모든 결정자가 후보키여야 합니다.

### 정규화의 장점
- 데이터 중복 감소
- 데이터 일관성 유지
- 데이터 갱신 이상 현상 방지

### 단점
- 테이블 수 증가로 인한 조인 연산 증가
- 일부 쿼리의 성능 저하 가능성

## 비정규화
비정규화는 정규화된 데이터베이스에 의도적으로 중복 데이터를 추가하거나 테이블을 통합하는 과정입니다.
주로 읽기 성능을 향상시키기 위해 사용됩니다.

### 비정규화 기법
1. 계산된 필드 추가
2. 테이블 병합
3. 테이블 분할(수직 또는 수평)
4. 중복 데이터 허용

### 비정규화의 장점
- 조회 성능 향상
- 복잡한 조인 연산 감소

### 단점
- 데이터 중복으로 인한 저장 공간 증가
- 데이터 긴관성 유지의 어려움
- 갱신 및 삽입 작업의 복잡성 증가

```sql
CREATE TABLE orders (
    order_id INT PRIMARY KEY,
    customer_id INT,
    order_date DATE
);

CREATE TABLE order_items (
    order_id INT,
    product_id INT,
    quantity INT,
    price DECIMAL(10, 2),
    PRIMARY KEY (order_id, product_id)
);

-- 비정규화된 구조
CREATE TABLE orders (
    order_id INT PRIMARY KEY,
    customer_it INT,
    order_date DATE,
    total_amount DECIMAL(10, 2),
    item_count INT
);
```
비정규화된 구조는 주문의 총액과 아이템 수를 직접 저장하여 조회 성능을 향상시킬 수 있지만, 이 정보를 일관되게 유지하는 것이 더 복잡해집니다.